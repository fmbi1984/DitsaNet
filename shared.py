import threading

from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtWidgets import QFileDialog, QDialog, QMessageBox, QScrollBar, QApplication, QWidget, QMainWindow
from PyQt5.QtPrintSupport import QPrinter, QPrintDialog
from PyQt5.QtGui import QIcon, QFont, QFontDatabase, QDesktopServices
from PyQt5.QtCore import QEventLoop, QByteArray, Qt, QUrl, pyqtSignal, pyqtSlot, QObject, QTimer, QElapsedTimer, QTime

serial_number = None

# constants that will indicate a pin state
LOW = 0
HIGH = 1

lock_uart = threading.Lock() # lock will be used as a lock for the UART
lock_memory = threading.Lock() # lock will be used as a lock for the memory

lock_client = threading.Lock()	#lock will be used as a lock for the client

#numero de modulos que tendra el gabinete
devStart = 1
devStop = 16


DA_PI = [] #todos los modulos
ON_PI = [] #solo los que dieron TRUE
RE_PI = [] #modulos reales en interfaz

#la cantidad de DEV_ADDR dependera de cuantos dip. sean por raspb(15aprx)
DEV_ADDR = [
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[],
	[]
]

#solo en shared de ubuntu tendra nameProgram
#ping #I #V #T #AH #AC #P #SOFF #t #Tt #TT #nameProgram #S #auxsavedatas #Name #Show #Address
DEV = [
    #[False, '', '', '', '', '', '', '', ''],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 1],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 2],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 3],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 4], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 5], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 6], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 7], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 8], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 9], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 10], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 11], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 12], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 13], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 14], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 15], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 16], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 17], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 18], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 19], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 20], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 21],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 22],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 23],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 24],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 25],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 26],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 27],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 28],

    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 29],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 30],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 31],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 32], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 33], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 34], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 35], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 36], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 37], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 38], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 39], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 40], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 41], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 42], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 43], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 44], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 45], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 46], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 47], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 48], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 49],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 50],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 51],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 52],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 53],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 54],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 55],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 56], 

    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 57],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 58],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 59],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 60], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 61], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 62], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 63], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 64], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 65], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 66], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 67], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 68], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 69], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 70], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 71], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 72], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 73], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 74], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 75], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 76], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 77],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 78],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 79],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 80],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 81],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 82],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 83],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 84],

    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 85],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 86],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 87],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 88], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 89], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 90], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 91], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 92], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 93], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 94], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 95], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 96], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 97], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 98], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 99], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 100], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 101], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 102], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 103], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 104], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 105],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 106],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 107],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 108],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 109],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 110],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 111],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 112], 
   
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 113],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 114],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 115],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 116], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 117], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 118], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 119], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 120], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 121], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 122], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 123], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 124], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 125], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 126], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 127], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 128], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 129], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 130], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 131], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 132], 
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 133],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 134],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 135],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 136],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 137],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 138],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 139],
    [False, '', '', '', '', '', '', '', '', '', '', 'S', True,'', 140],  
]


'''
[1-28]
[29-56]
[59-84]
[85-112]
[113-140]
[141-168]
[169-196]
[197-224]
'''


def map(x, in_min, in_max, out_min, out_max):
    return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min

def dec2str(number, places):
    return '{:.2f}'.format(number)

def CenterWidgets(widget:QWidget):
    screenGeometry =  QApplication.desktop().screenGeometry()
    x = (screenGeometry.width() - widget.width())/ 2
    y = (screenGeometry.height()- widget.height())/ 2
    widget.move(x, y)

